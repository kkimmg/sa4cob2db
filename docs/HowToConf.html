<html>
<head>
<title>How To Conf.</title>
</head>
<body>
<ol>
<li>
Environment Values.
<table border="1">
<tr><th>Environment Value</th><th>Description</th><th>Sample</th></tr>
<tr><td>ACM_CONFFILE</td><td>File Name of meta data set.</td><td>/opt/sa4cob2db/conf/metafile.xml</td></tr>
<tr><td>ACMLIBS_DIR</td><td>Directory where acmlibs.jar exsists.</td><td>/opt/sa4cob2db</td></tr>
<tr><td>ACM_HOSTNAME</td><td>hostname or address that SQLNetServer accepts.<br>This value is used by TCP client.</td><td>localhost</td></tr>
<tr><td>ACM_USERNAME</td><td>username for connect to SQLNetServer.<br>This value is used by TCP client.</td><td>username</td></tr>
<tr><td>ACM_PASSWORD</td><td>password for connect to SQLNetServer.<br>This value is used by TCP client.</td><td>password</td></tr>
<tr><td>ACM_PP_CHARSET</td><td>Charcter set of source code</td><td>EUCJP</td></tr>
<tr><td>ACM_SESSIONLISTENERS</td><td>Classes process session events.<br>Class names separated by ":"</td><td>ACMSessionEventAdapterTest</td></tr>
<tr><td>ACM_SERVERLISTENERS</td><td>Classes process server events.<br>Class names separated by ":"</td><td>ACMServerEventAdapterTest:k_kim_mg.sa4cob2db.admin.MinAdminAdapter</td></tr>
<tr><td>ACMOFF_FILE</td><td>Configuration File for to  SQLNetServer.</td><td>sa4cob2db/conf/shutdown.conf</td></tr>
</table>
</li>
<li>
Configuration File(<a href="./metafile.dtd">DTD</a>)<br/>
<ol>
<li>meatadataset</li>
<ol>
	<li>property</li>entire settings<br/>
	<ol>
		<li>jdbcdriverurl</li>JDBC Driver URL.
		<li>jdbcdatabaseurl</li>JDBC Database URL
		<li>jdbcusername</li>JDBC Database Username.
		<li>jdbcpassword</li>JDBC Database Password.
		<li>address</li>hostname or address that SQLNetServer accepts address. Comma(,) Seperated Name or Addresses.<br/>default value is localhost.
		<li>port</li>Accepting port number.<br/>default value is 12345.
		<li>maxsessions</li>Maximum Session Count.0 is unlimmited.
		<li>log</li>Log Cinfiguration File name.
		<li>authfile</li>Password File name.
		<li>adminfile</li>Administrators Password File name..
		<li>backlog</li>Backlog of Server Socket that SQLNetServer uses.
		<li>sessionlisteners</li>Classes process session events.<br>Class names separated by ":"
		<li>serverlisteners</li>Classes process server events.<br>Class names separated by ":"
	</ol>
	<li>otherofset</li>Class to handle other nodes nor in the entire settings in metadata. The class what has to implement <a href="../doc/k_kim_mg/sa4cob2db/sql/xml/MetaDataSetNodeProcessor.html">MetaDataSetNodeProcessor<a/> interface.
	<li>otherofmeta</li>metadata直下に存在するその他のノードを処理するためのクラス。ここで指定されるクラスは<a href="../doc/k_kim_mg/sa4cob2db/sql/xml/MetaDataNodeProcessor.html">MetaDataNodeProcessor<a/>インターフェースを実装する必要があります。
	<li>metadata:各コボルファイル相当部分</li>
	属性
	<ol>
		<li>name</li>コボルファイル名。<br/>SELECT XXXX ASSIGN TO YYYY.のYYYYに相当する名称を設定します。
		<li>bufinit</li>初期バッファサイズ。<br/>シーケンシャルリード時にバッファリングするレコードの初期件数。<br/>初期サイズに達するまでREAD NEXT処理は待機されます
		<li>bufmin</li>最小バッファサイズ。<br/>シーケンシャルリード時にバッファリングするレコードの最小件数。<br/>最小サイズに達するまでREAD NEXT処理は待機されます。
		<li>bufmax</li>最大バッファサイズ。<br/>シーケンシャルリード時にバッファリングするレコードの最大件数。
		<li>encode</li>レコードの文字エンコーディング
		<li>customClassName</li>組み込みでない独自の動作をさせるためのクラス。<br/>ここで指定されるクラスは<a href="../doc/k_kim_mg/sa4cob2db/CobolRecordMetaData.html">CobolRecordMetaData<a/>インターフェースを実装する必要があります。
	</ol>
	ノード
	<ol>
		<li>statement</li>SELECT文<br/>乱読み出しを行う場合は必ずORDER BY句で結果セットがキー順になるようにソートしてください。
		<li>sqlcolumn</li>SELECT文で指定した結果セットの列をそのままコボルレコードの列に割り当てます。<br/>
		属性
		<ol>
			<li>name</li>列名。<br/>sqlcolumn/customcolumnに関わらずmetadata内で一意に識別可能な名前を仕様してください。<br/>(1ファイル内で重複しないようにしてください。)
			<li>type</li>データ型。対応するデータの方を整数値で指定します。
				
			<li>start</li>開始位置。0で始まります。
			<li>length</li>列長。バイト数です。
			<li>format</li>書式文字列。数値型などのデータの整形などに利用します。<br/>
					組み込みの型では以下に対応するフォーマット文字列を利用します。<br/>
					<table border="1">
					<tr><th>データ型</th><th>クラス</th>
					<tr><td>数値型</td><td>java.text.DecimalFormat</td>
					<tr><td>日付型</td><td>java.text.SimpleDateFormat</td>
					</table>
			<li>originalColumnName</li>SQL結果セットのフィールド名。
			<li>defaultString</li>
			<li>readIgnore</li>読み込み(read/select)時に無視するかどうか<br/>設定しない場合は"false"。</br>
				<table border="1">
					<tr><th>セットした値</th><th>動作</th>
					<tr><td><b>false</b></td><td>結果セットの値でコボル側データを更新する。</td>
					<tr><td>true</td><td>結果セットの値でコボル側データを更新しない。</td>
				</table>
			<li>rewriteIgnore</li>更新(rewrite/update)時に無視するかどうか<br/>設定しない場合は"false"。</br>
				<table border="1">
					<tr><th>セットした値</th><th>動作</th>
					<tr><td><b>false</b></td><td>コボル側データで結果セットの値を更新する。</td>
					<tr><td>true</td><td>コボル側データで結果セットの値を更新しない。</td>
				</table>
			<li>writeIgnore</li>挿入(write/insert)時に無視するかどうか<br/>設定しない場合は"false"。</br>
				<table border="1">
					<tr><th>セットした値</th><th>動作</th>
					<tr><td><b>false</b></td><td>コボル側データで結果セットの値を更新する。</td>
					<tr><td>true</td><td>コボル側データで結果セットの値を更新しない。</td>
				</table>
		</ol>
		<li>customcolumn</li>組み込みの列では実現できない独自の動作をする列を定義します。<br/>
		属性
		<ol>
			<li>name</li>列名。<br/>sqlcolumn/customcolumnに関わらずmetadata内で一意に識別可能な名前を仕様してください。<br/>(1ファイル内で重複しないようにしてください。)
			<li>classname</li>列の動作を規定するクラス名。ここに指定されるクラスは<a href="doc/jp/ne/biglobe/mvh/k_kim_mg/acm/CobolColumn.html">CobolColumn</a>を実装する必要があります。<br/>
				設定ファイルではクラスパスを設定・更新しません。<br/>
				クラスパスは起動スクリプトなどに記述しておいてください
			<li>constructor</li>この列のクラスのオブジェクトを作成するためのコンストラクタを選択します。
				<table border="1">
				<tr><th>値</th><th colspan="2">引数</th></tr>
				<tr><td>1</td><td colspan="2">引数なし</td><tr>
				<tr><td>2</td><td>メタデータ</td><td>この列を含むメタデータ/ファイルレイアウトに相当するmetadataオブジェクト</td><tr>
				<tr rowspan="2"><td rowspan="2">3</td><td>メタデータ</td><td>この列を含むメタデータ/ファイルレイアウトに相当するmetadataオブジェクト</td></tr>
				<tr><td>ノード</td><td>この列を定義しているnodeオブジェクト</td></tr>
				</table>
			<li>type</li>sqlcolumnに同じ。なくてもよい。				
			<li>start</li>sqlcolumnに同じ。なくてもよい。
			<li>length</li>sqlcolumnに同じ。なくてもよい。
			<li>format</li>sqlcolumnに同じ。なくてもよい。
			<li>originalColumnName</li>sqlcolumnに同じ。なくてもよい。
			<li>defaultString</li>sqlcolumnに同じ。なくてもよい。
			<li>readIgnore</li>sqlcolumnに同じ。なくてもよい。
			<li>rewriteIgnore</li>sqlcolumnに同じ。なくてもよい。
			<li>writeIgnore</li>sqlcolumnに同じ。なくてもよい。
		</ol>
		<li>keycolumn</li>キー項目の列名(sqlcolumn/customcolumnのname属性の値)
		<li>indexfile</li>START命令などで使用するための索引を定義します。<br>
		属性
		<ol> 
			<li>filename</li>事前に作成したレイアウト/メタデータ/ファイルを指定します。
			<li>indexname</li>COBOLプログラムが使用するための索引名を指定します。
		</ol>
		ノード<br/>
		ファイルとインデックスの列の関連付けを行います。
		<ol>
			<li>index2file</li>インデックスの列をファイルのキー列に割り当てます。<br/>
			属性
			<ol>
				<li>filecolumn</li>ファイル側の列
				<li>indexcolumn</li>インデックス側の列
			</ol>
			<li>file2index</li>ファイルの列をインデックスのキー列に割り当てます。<br/>
			属性
			<ol>
				<li>filecolumn</li>ファイル側の列
				<li>indexcolumn</li>インデックス側の列
			</ol>
		</ol>
		<li>truncate</li>全データを削除するSQL文を記述します。<br/>
				ファイルをOUTPUTモードでオープンしたときに実行されます。

		<li>listener</li>このメタデータのイベント処理を行うクラスを指定します。<br/>ここで指定するクラスはCobolFileEventListenerを実装しなければなりません。
	</ol>
</ol>
</li>
</ol>
</body>
</html>

